<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        body { margin: 0; padding: 10px; font-family: Arial; }
        .item { padding: 5px; margin: 3px 0; border-left: 3px solid #ddd; }
        .selected { border-left-color: orange; background: #fff8e1; }
        .email { padding: 5px; background: #f5f5f5; border-radius: 3px; margin-top: 5px; font-size: 12px; }
    </style>
</head>
<body>
    <div id="checklist"></div>
    <div id="email" class="email"></div>

<script>
const PEOPLE = [
    { checkboxId: 'input_280_0', name: 'Rowan Isaacs', signatureId: 'worker1', email: 'darcievaughan+rowan@gmail.com' },
    { checkboxId: 'input_280_1', name: 'Mark Hair', signatureId: 'worker2', email: 'darcievaughan+mark@gmail.com' },
    { checkboxId: 'input_280_2', name: 'Sam Mitchell', signatureId: 'worker3', email: 'darcievaughan+sam@gmail.com' },
    { checkboxId: 'input_280_3', name: 'Alex Mclean', signatureId: 'worker4', email: 'darcievaughan+alex@gmail.com' },
    { checkboxId: 'input_280_4', name: 'Rai Samson', signatureId: 'worker5', email: 'darcievaughan+rai@gmail.com' },
    { checkboxId: 'input_280_5', name: 'Darren Taylor', signatureId: 'worker6', email: 'darcievaughan+darren@gmail.com' },
    { checkboxId: 'input_280_6', name: 'Ty Wilson', signatureId: 'worker7', email: 'darcievaughan+ty@gmail.com' },
    { checkboxId: 'input_280_7', name: 'Kristian', signatureId: 'worker8', email: 'darcievaughan+kristian@gmail.com' },
    { checkboxId: 'input_280_8', name: 'Graham Wickham', signatureId: 'worker9', email: 'darcievaughan+graham@gmail.com' },
    { checkboxId: 'input_280_9', name: 'Mike Rono', signatureId: 'worker10', email: 'darcievaughan+mike@gmail.com' },
    { checkboxId: 'input_280_10', name: 'Dale Roulston', signatureId: 'worker11', email: 'darcievaughan+dale@gmail.com' },
    { checkboxId: 'input_280_11', name: 'John Clark', signatureId: 'worker12', email: 'darcievaughan+john@gmail.com' }
];

const EMAIL_FIELD_ID = 'input_363';

function update() {
    const selected = [];
    
    PEOPLE.forEach(person => {
        try {
            if (window.parent && window.parent.document) {
                const checkbox = window.parent.document.getElementById(person.checkboxId);
                if (checkbox && checkbox.checked) {
                    selected.push(person);
                    
                    const sigField = window.parent.document.getElementById(person.signatureId);
                    if (sigField) sigField.style.display = 'block';
                }
            }
        } catch(e) {}
    });
    
    // Update checklist
    const checklist = document.getElementById('checklist');
    if (selected.length === 0) {
        checklist.innerHTML = '<div class="item">Select names above</div>';
    } else {
        checklist.innerHTML = selected.map(p => 
            `<div class="item selected">${p.name}</div>`
        ).join('');
    }
    
    // Update email display
    const emails = selected.map(p => p.email);
    document.getElementById('email').textContent = emails.join(', ') || 'No emails';
    
    // Update JotForm field
    try {
        if (window.parent && window.parent.document) {
            const field = window.parent.document.getElementById(EMAIL_FIELD_ID);
            if (field) {
                field.value = emails.join(', ');
                const event = new Event('change', { bubbles: true });
                field.dispatchEvent(event);
            }
        }
    } catch(e) {}
}

// Start
setInterval(update, 1000);
update();
</script>
</body>
</html>
