<!DOCTYPE html>
<html>
<head>
    <title>Signature Checklist</title>
    <style>
        body { 
            font-family: Arial; 
            padding: 15px; 
            margin: 0; 
            background: white;
        }
        .checklist-item {
            padding: 8px;
            margin: 5px 0;
            border-left: 3px solid #ddd;
        }
        .selected {
            border-left-color: orange;
            background: #fff8e1;
        }
        .counter {
            background: #2196F3;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 10px;
        }
        .status {
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            background: #e8f5e9;
            border: 1px solid #4CAF50;
            display: none;
        }
    </style>
</head>
<body>
    <h4>Signature Checklist <span id="counter" class="counter">0</span></h4>
    <div id="checklist">Select names in the form above</div>
    <div id="status" class="status">✅ All signatures complete</div>
    
    <script>
    // Your configuration
    const people = [
        { name: 'Rowan Isaacs', email: 'darcievaughan+rowan@gmail.com' },
        { name: 'Mark Hair', email: 'darcievaughan+mark@gmail.com' },
        { name: 'Sam Mitchell', email: 'darcievaughan+sam@gmail.com' },
        { name: 'Alex Mclean', email: 'darcievaughan+alex@gmail.com' },
        { name: 'Rai Samson', email: 'darcievaughan+rai@gmail.com' },
        { name: 'Darren Taylor', email: 'darcievaughan+darren@gmail.com' },
        { name: 'Ty Wilson', email: 'darcievaughan+ty@gmail.com' },
        { name: 'Kristian', email: 'darcievaughan+kristian@gmail.com' },
        { name: 'Graham Wickham', email: 'darcievaughan+graham@gmail.com' },
        { name: 'Mike Rono', email: 'darcievaughan+mike@gmail.com' },
        { name: 'Dale Roulston', email: 'darcievaughan+dale@gmail.com' },
        { name: 'John Clark', email: 'darcievaughan+john@gmail.com' }
    ];

    // Simple function to check checkboxes
    function checkSelectedNames() {
        const selectedEmails = [];
        let selectedCount = 0;
        
        // Try to find checkboxes - SIMPLE METHOD
        for (let i = 0; i < 12; i++) {
            // Try different checkbox IDs that JotForm might use
            const possibleIds = [
                `input_3_${i}`,      // Common JotForm pattern
                `input_4_${i}`,
                `input_5_${i}`,
                `q3_${i}`,           // Another pattern
                `q4_${i}`,
                `${i}_1`,            // Yet another
                `question3_${i}`
            ];
            
            let isChecked = false;
            
            // Check each possible ID
            for (const id of possibleIds) {
                const checkbox = document.getElementById(id);
                if (checkbox && checkbox.checked) {
                    isChecked = true;
                    break;
                }
            }
            
            // If we found a checked checkbox for this position
            if (isChecked && people[i]) {
                selectedCount++;
                selectedEmails.push(people[i].email);
            }
        }
        
        return { selectedCount, selectedEmails };
    }

    // Update the display
    function updateDisplay() {
        const result = checkSelectedNames();
        const checklist = document.getElementById('checklist');
        const counter = document.getElementById('counter');
        const status = document.getElementById('status');
        
        counter.textContent = result.selectedCount;
        
        if (result.selectedCount === 0) {
            checklist.innerHTML = 'Select names in the form above';
        } else {
            let html = '';
            result.selectedEmails.forEach(email => {
                // Extract name from email for display
                const name = email.split('+')[1]?.split('@')[0] || 'Person';
                html += `<div class="checklist-item selected">✓ ${name} (${email})</div>`;
            });
            checklist.innerHTML = html;
            
            // Show status if all selected
            if (result.selectedCount > 0) {
                status.style.display = 'block';
            }
        }
        
        // Update JotForm field if we can find it
        updateJotFormField(result.selectedEmails);
    }

    // Try to update JotForm field
    function updateJotFormField(emails) {
        try {
            const emailString = emails.join(', ');
            
            // Try to find the email field
            const field = document.getElementById('input_363');
            if (field) {
                field.value = emailString;
                console.log('Updated email field:', emailString);
            }
        } catch (e) {
            // Silently fail
        }
    }

    // Start checking immediately and keep checking
    setInterval(updateDisplay, 1000);
    updateDisplay(); // First update
    </script>
</body>
</html>
